{"meta":{"title":"Hexo","subtitle":"","description":"","author":"John Doe","url":"http://example.com","root":"/"},"pages":[],"posts":[{"title":"","slug":"自定义异常处理类校验接口入参","date":"2021-03-18T01:03:59.376Z","updated":"2021-03-18T01:20:52.210Z","comments":true,"path":"2021/03/18/自定义异常处理类校验接口入参/","link":"","permalink":"http://example.com/2021/03/18/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%B1%BB%E6%A0%A1%E9%AA%8C%E6%8E%A5%E5%8F%A3%E5%85%A5%E5%8F%82/","excerpt":"","text":"自定义异常处理类校验接口入参一、问题：做沃易售的时候看到很多需要判断入参字段是否为空，为空的话就返回自定义提示！当判断入参很多的话用if判断的话代码就很繁琐。比如下面代码： 这只是3个，如果有10个的话代码量就很多了，虽然只需要cv。 二、解决方案：1、首先我们使用@Valid 和 @NotBlank 注解将入参交给spring校验代码如下： 入参对象字段注解： （message为入参校验不通过返回的提示信息） 方法入参注解： ​ 我们使用swagger测试一下： 从日志中可以发现，参数不符合校验规则会报MethodArgumentNotValidException异常。 2、使用自定义的异常处理类来捕捉异常并返回错误编码和提示信息 知道异常类型后，我们就来捕捉它 ​ 自定义异常处理类： @RestControllerAdvice：将被@RestControllerAdvice注解的类的内部所有被@ExceptionHandler, ​ @ InitBinderhe @ ModelAttribute注解的方法应用到所有被 @RequestMapping 注解的方法里面去。 ​ @ExceptionHandler 注解标明要捕捉的异常类型。 ​ BaseResp 为沃易售封装的返回报文格式，这个我们可以根据自己工程的报文格式来做。 我们将错误代码，及异常中自定义的message赋值并返回baseResp给前台。 ​ 再来一次！ ​ 按照指定的报文格式返回校验结果了！ 三、拓展：​ 1、不仅可以校验是否为空还可以这样 校验字段长度范围、校验数字大小！ 2、当然不止校验参数，我们还可处理其他异常并返回 在配置文件中设置上传文件最大为10M 异常处理类中新增 MaxUploadSizeExceededException异常捕捉的方法 测试一下，上传超过10M的文件返回报文 超过10M被拦截！","categories":[],"tags":[]},{"title":"","slug":"数据结构","date":"2021-03-16T08:43:02.463Z","updated":"2021-03-15T10:10:32.672Z","comments":true,"path":"2021/03/16/数据结构/","link":"","permalink":"http://example.com/2021/03/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","excerpt":"","text":"数据结构数据结构是计算机存储、组织数据的方式 线性结构列如：线性表(数组、链表、栈、队列、哈希表) 数组数组是一种顺序存储的线性表，所有元素的内存地址是连续的 树形结构二叉树、AVL树、红黑树、B树、堆、Trie、哈夫曼树、并查集","categories":[],"tags":[]}],"categories":[],"tags":[]}